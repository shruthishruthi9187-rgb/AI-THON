<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MindTrack â€” Responsive Wellness App (Front-end)</title>
  <meta name="description" content="Daily mood check-ins, sentiment analysis, personalized recommendations, and trend visualizations." />
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#6ee7b7; --danger:#fb7185; --glass: rgba(255,255,255,0.04);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071126 0%, #0b1220 60%);color:#e6eef6}
    .app{max-width:1100px;margin:24px auto;padding:18px;}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px}
    h1{font-size:1.25rem;margin:0}
    .subtitle{color:var(--muted);font-size:0.9rem}

    .grid{display:grid;grid-template-columns:1fr 420px;gap:18px;margin-top:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:16px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .checkin-list{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .mood-btn{padding:10px 14px;border-radius:10px;border:1px solid transparent;background:var(--glass);cursor:pointer;color:var(--muted)}
    .mood-btn:hover{transform:translateY(-2px)}
    .mood-emoji{font-size:1.4rem;margin-right:8px}

    .controls{display:flex;gap:8px;margin-top:12px}
    button.cta{background:linear-gradient(90deg,var(--accent),#34d399);border:none;padding:10px 14px;border-radius:10px;color:#022;cursor:pointer;font-weight:600}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:10px;color:var(--muted);cursor:pointer}

    .log{margin-top:12px;max-height:320px;overflow:auto}
    .entry{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);margin-bottom:8px}
    .entry .left{display:flex;gap:12px;align-items:center}
    .tag{font-size:0.85rem;color:var(--muted)}

    .recommend{margin-top:12px;padding:12px;border-radius:10px;background:rgba(110,231,183,0.06);color:#dff7ee}

    /* Responsive */
    @media(max-width:900px){
      .grid{grid-template-columns:1fr;}
    }

    /* small helpers */
    .muted{color:var(--muted)}
    input[type="text"], textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    label{font-size:0.85rem;color:var(--muted)}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>MindTrack</h1>
        <div class="subtitle">Daily mood check-ins â€¢ Sentiment analysis â€¢ Personalized recommendations</div>
      </div>
      <div class="muted">Welcome â€” track your wellbeing daily</div>
    </header>

    <main class="grid">
      <!-- Left: main interactions -->
      <section class="card">
        <h2 style="margin:0">Check-in</h2>
        <p class="muted">How are you feeling right now? Choose a mood and (optionally) write a short note.</p>

        <div class="checkin-list" id="moodOptions">
          <!-- Buttons inserted by JS -->
        </div>

        <div style="margin-top:12px">
          <label for="note">Short note (optional)</label>
          <textarea id="note" rows="3" placeholder="What happened today? What are you grateful for?"></textarea>
        </div>

        <div class="controls">
          <button class="cta" id="saveBtn">Save Check-in</button>
          <button class="ghost" id="clearBtn">Clear Logs</button>
        </div>

        <div class="recommend" id="todayRecommendation" style="display:none"></div>

        <div class="log" id="logArea"></div>
      </section>

      <!-- Right: analytics -->
      <aside class="card">
        <h3 style="margin:0">Trends</h3>
        <p class="muted">Last 30 days mood overview</p>
        <canvas id="trendChart" width="400" height="240" style="margin-top:12px"></canvas>

        <div style="margin-top:18px">
          <h4 style="margin:0">Quick insights</h4>
          <ul id="insights" class="muted" style="margin-top:8px"></ul>
        </div>

        <div style="margin-top:18px">
          <h4 style="margin:0">Privacy</h4>
          <p class="muted" style="margin-top:6px">All data is stored locally in your browser (localStorage). No account required.</p>
        </div>
      </aside>
    </main>

    <footer style="text-align:center;margin-top:18px;color:var(--muted);font-size:0.9rem">Made with care â€” simple client-side demo for prototyping</footer>
  </div>

  <!-- Chart.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    /* --- Simple front-end wellness app JavaScript --- */
    const MOODS = [
      {id:'ecstatic',label:'Ecstatic',emoji:'ðŸ˜„',score:5},
      {id:'happy',label:'Happy',emoji:'ðŸ™‚',score:4},
      {id:'neutral',label:'Neutral',emoji:'ðŸ˜',score:3},
      {id:'sad',label:'Sad',emoji:'â˜¹ï¸',score:2},
      {id:'anxious',label:'Anxious',emoji:'ðŸ˜Ÿ',score:1}
    ];

    // render mood buttons
    const moodOptions = document.getElementById('moodOptions');
    MOODS.forEach(m => {
      const btn = document.createElement('button');
      btn.className = 'mood-btn';
      btn.dataset.id = m.id;
      btn.dataset.score = m.score;
      btn.innerHTML = `<span class='mood-emoji'>${m.emoji}</span><span>${m.label}</span>`;
      btn.addEventListener('click', ()=> selectMood(btn));
      moodOptions.appendChild(btn);
    });

    let selectedMood = null;
    function selectMood(btn){
      document.querySelectorAll('.mood-btn').forEach(b=>b.style.borderColor='transparent');
      btn.style.borderColor='rgba(255,255,255,0.12)';
      selectedMood = MOODS.find(x=>x.id===btn.dataset.id);
    }

    // storage helpers
    const STORAGE_KEY = 'mindtrack_logs_v1';
    function loadLogs(){
      try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]'); }catch(e){return []}
    }
    function saveLogs(logs){ localStorage.setItem(STORAGE_KEY, JSON.stringify(logs)); }

    // naive sentiment analysis using word lists (client-side only)
    const POSITIVE = ['good','great','happy','joy','love','grateful','calm','relaxed','excited','optimistic'];
    const NEGATIVE = ['sad','angry','upset','hate','anxious','worried','depressed','stressed','tired','lonely'];

    function analyzeSentiment(text){
      if(!text) return 0;
      const t = text.toLowerCase();
      let score=0;
      POSITIVE.forEach(w=>{ if(t.includes(w)) score+=1 });
      NEGATIVE.forEach(w=>{ if(t.includes(w)) score-=1 });
      return Math.max(-3, Math.min(3, score));
    }

    // recommendations engine (simple rule-based)
    function generateRecommendation(mood, noteSentiment){
      if(!mood) return 'Try a quick check-in â€” choose how you feel above.';
      if(mood.score>=4 && noteSentiment>=0) return 'Great! Keep reinforcing positive habits: short walk, gratitude journal, or share your good moment with a friend.';
      if(mood.score>=4 && noteSentiment<0) return 'You feel good but note contains some concerns. Do a 5-minute breathing exercise and reflect on what is bothering you.';
      if(mood.score===3) return 'Neutral day â€” try a small mood-boosting activity: music, stretch, or a short mindful break.';
      if(mood.score<=2 && noteSentiment<0) return 'Tough day. Consider grounding exercises, 5-4-3-2-1 mindfulness, or reaching out to someone you trust.';
      if(mood.score<=2) return 'Consider self-care: hydration, short walk, or breathing exercises. If persistent low mood, consult a professional.';
      return 'Be kind to yourself today â€” small steps add up.';
    }

    // UI: save check-in
    const saveBtn = document.getElementById('saveBtn');
    const clearBtn = document.getElementById('clearBtn');
    const noteEl = document.getElementById('note');
    const todayRec = document.getElementById('todayRecommendation');
    const logArea = document.getElementById('logArea');

    saveBtn.addEventListener('click', ()=>{
      const note = noteEl.value.trim();
      if(!selectedMood){ alert('Please choose a mood before saving.'); return; }
      const sentiment = analyzeSentiment(note);
      const logs = loadLogs();
      const entry = {id:Date.now(),date:new Date().toISOString(),mood:selectedMood.id,score:selectedMood.score,note:note,sentiment:sentiment};
      logs.unshift(entry);
      saveLogs(logs);
      noteEl.value=''; selectedMood=null; document.querySelectorAll('.mood-btn').forEach(b=>b.style.borderColor='transparent');
      renderLogs(); renderChart(); showRecommendation(entry);
    });

    clearBtn.addEventListener('click', ()=>{
      if(confirm('Clear all local logs? This cannot be undone.')){ localStorage.removeItem(STORAGE_KEY); renderLogs(); renderChart(); todayRec.style.display='none'; }
    });

    // render logs
    function renderLogs(){
      const logs = loadLogs();
      if(logs.length===0){ logArea.innerHTML='<div class="muted">No check-ins yet. Your entries appear here.</div>'; return; }
      logArea.innerHTML='';
      logs.slice(0,50).forEach(e=>{
        const mood = MOODS.find(m=>m.id===e.mood);
        const div = document.createElement('div'); div.className='entry';
        div.innerHTML = `<div class=left><div style='font-size:1.3rem'>${mood.emoji}</div><div><div style='font-weight:600'>${mood.label}</div><div class='tag'>${new Date(e.date).toLocaleString()}</div></div></div><div style='text-align:right'><div class='tag'>Sentiment: ${e.sentiment}</div><div style='margin-top:6px;color:var(--muted);max-width:220px'>${escapeHtml(e.note||'â€”')}</div></div>`;
        logArea.appendChild(div);
      })
    }

    function showRecommendation(entry){
      const rec = generateRecommendation(MOODS.find(m=>m.id===entry.mood), entry.sentiment);
      todayRec.style.display='block';
      todayRec.textContent = rec;
    }

    // simple chart for last 30 days average
    let trendChart = null;
    function renderChart(){
      const logs = loadLogs();
      // aggregate by day (last 30 days)
      const days = []; const now = new Date();
      for(let i=29;i>=0;i--){ const d = new Date(now.getFullYear(), now.getMonth(), now.getDate()-i); days.push(d); }
      const labels = days.map(d=>d.toLocaleDateString());
      const scores = days.map(d=>{
        const dayStr = d.toISOString().slice(0,10);
        const todays = logs.filter(l=>l.date.slice(0,10)===dayStr);
        if(todays.length===0) return null;
        const avg = todays.reduce((s,x)=>s+x.score,0)/todays.length; return Math.round(avg*10)/10;
      });

      const ctx = document.getElementById('trendChart').getContext('2d');
      if(trendChart) trendChart.destroy();
      trendChart = new Chart(ctx, {
        type: 'line',
        data: { labels: labels, datasets: [{ label:'Mood score (1-5)', data: scores, spanGaps:true, tension:0.3, fill:true }]},
        options: { responsive:true, plugins:{legend:{display:false}}, scales:{y:{min:0,max:5,ticks:{stepSize:1}}} }
      });

      // insights
      const insights = document.getElementById('insights'); insights.innerHTML='';
      const recent = logs.slice(0,7);
      if(recent.length===0){ insights.innerHTML='<li>No data yet â€” check-in to get personalized insights.</li>'; return; }
      const avgRecent = recent.reduce((s,x)=>s+x.score,0)/recent.length;
      const li1 = document.createElement('li'); li1.textContent = `Average mood last ${recent.length} entry(ies): ${Math.round(avgRecent*10)/10}`; insights.appendChild(li1);
      const posNotes = recent.filter(r=>r.sentiment>0).length; const negNotes = recent.filter(r=>r.sentiment<0).length;
      const li2 = document.createElement('li'); li2.textContent = `Notes with positive sentiment: ${posNotes}`; insights.appendChild(li2);
      const li3 = document.createElement('li'); li3.textContent = `Notes with negative sentiment: ${negNotes}`; insights.appendChild(li3);
    }

    // small helper to escape html
    function escapeHtml(str){ return str.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

    // init
    (function(){ renderMoodDefaults(); renderLogs(); renderChart(); })();

    function renderMoodDefaults(){ /* choose neutral by default visually */ }

    // Expose quick demo data loader (for development)
    window.__seedDemo = function(){
      const demo = [];
      const now = Date.now();
      for(let i=0;i<18;i++){
        const day = new Date(now - i*24*3600*1000);
        demo.push({id:Date.now()+i,date:day.toISOString(),mood:MOODS[Math.floor(Math.random()*MOODS.length)].id,score:Math.ceil(Math.random()*5),note: (Math.random()>0.6? 'Had a good walk and felt calm':'Busy day, a bit stressed'),sentiment:Math.random()>0.6?1:-1});
      }
      localStorage.setItem(STORAGE_KEY, JSON.stringify(demo)); renderLogs(); renderChart();
    }

  </script>
</body>
</html>
